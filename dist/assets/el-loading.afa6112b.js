import{J as e,K as t,g as n,E as l,G as o,z as i,A as r,I as a,j as s,k as u,v as d,T as c}from"./vendor.65100392.js";import{i as g,g as v,P as b,a as p,r as f}from"./with-install.e85bbea4.js";var m=Object.defineProperty,y=Object.defineProperties,h=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&O(e,n,t[n]);if(x)for(var n of x(t))L.call(t,n)&&O(e,n,t[n]);return e},P=(e,t)=>y(e,h(t));"undefined"!=typeof require&&require;var j=Object.defineProperty,E=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&I(e,n,t[n]);if(E)for(var n of E(t))C.call(t,n)&&I(e,n,t[n]);return e};"undefined"!=typeof require&&require;const T={parent:null,background:"",svg:null,svgViewBox:null,spinner:!1,text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},$={fullscreenLoading:null},q=(t,n,l)=>{return o=void 0,i=null,r=function*(){const o={};t.fullscreen?(l.originalPosition.value=v(document.body,"position"),l.originalOverflow.value=v(document.body,"overflow"),o.zIndex=b.nextZIndex()):t.body?(l.originalPosition.value=v(document.body,"position"),yield e(),["top","left"].forEach((e=>{const n="top"===e?"scrollTop":"scrollLeft";o[e]=t.target.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]-parseInt(v(document.body,`margin-${e}`),10)+"px"})),["height","width"].forEach((e=>{o[e]=`${t.target.getBoundingClientRect()[e]}px`}))):l.originalPosition.value=v(n,"position"),Object.keys(o).forEach((e=>{l.$el.style[e]=o[e]}))},new Promise(((e,t)=>{var n=e=>{try{a(r.next(e))}catch(n){t(n)}},l=e=>{try{a(r.throw(e))}catch(n){t(n)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,l);a((r=r.apply(o,i)).next())}));var o,i,r},S=(e,t,n)=>{"absolute"!==n.originalPosition.value&&"fixed"!==n.originalPosition.value?p(t,"el-loading-parent--relative"):f(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?p(t,"el-loading-parent--hidden"):f(t,"el-loading-parent--hidden")},V=function(v={}){if(g)return;"string"==typeof(v=B(B({},T),v)).target&&(v.target=document.querySelector(v.target)),v.target=v.target||document.body,v.target!==document.body?v.fullscreen=!1:v.body=!0,v.fullscreen&&$.fullscreenLoading&&$.fullscreenLoading.close();const b=v.body?document.body:v.target;v.parent=b;const p=function({options:e,globalLoadingOption:t}){let g=null,v=null;const b=n(!1),p=l(P(A({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function m(){const e=p.parent;if(!e.vLoadingAddClassList){let t=e.getAttribute("loading-number");t=Number.parseInt(t)-1,t?e.setAttribute("loading-number",t.toString()):(f(e,"el-loading-parent--relative"),e.removeAttribute("loading-number")),f(e,"el-loading-parent--hidden")}g.el&&g.el.parentNode&&g.el.parentNode.removeChild(g.el)}const y=P(A({},o(p)),{setText:function(e){p.text=e},close:function(){p.parent.vLoadingAddClassList=null,p.fullscreen&&(t.fullscreenLoading=void 0),b.value=!0,clearTimeout(v),v=window.setTimeout((()=>{b.value&&(b.value=!1,m())}),400),p.visible=!1},handleAfterLeave:function(){b.value&&(b.value=!1,m())}}),h={name:"ElLoading",setup:()=>y,render(){const e=a("svg",A({class:"circular",viewBox:this.svgViewBox?this.svgViewBox:"25 25 50 50"},this.svg?{innerHTML:this.svg}:{}),[a("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),t=a("i",{class:this.spinner}),n=a("p",{class:"el-loading-text"},[this.text]);return a(c,{name:"el-loading-fade",onAfterLeave:this.handleAfterLeave},{default:s((()=>[u(i("div",{style:{backgroundColor:this.background||""},class:["el-loading-mask",this.customClass,this.fullscreen?"is-fullscreen":""]},[a("div",{class:"el-loading-spinner"},[this.spinner?t:e,this.text?n:null])]),[[d,this.visible]])]))})}};return g=i(h),r(g,document.createElement("div")),P(A({},y),{vm:g,get $el(){return g.el}})}({options:v,globalLoadingOption:$});q(v,b,p),S(v,b,p),v.parent.vLoadingAddClassList=()=>{S(v,b,p)};let m=b.getAttribute("loading-number");return m=m?Number.parseInt(m)+1:1,b.setAttribute("loading-number",m.toString()),b.appendChild(p.$el),e().then((()=>{p.visible.value=!t(v,"visible")||v.visible})),v.fullscreen&&($.fullscreenLoading=p),p},N=(e,t)=>{const n=e.getAttribute("element-loading-text"),l=e.getAttribute("element-loading-spinner"),o=e.getAttribute("element-loading-svg"),i=e.getAttribute("element-loading-svg-view-box"),r=e.getAttribute("element-loading-background"),a=e.getAttribute("element-loading-custom-class"),s=t.instance;e.ElLoading=V({text:s&&s[n]||n,svg:s&&s[o]||o,svgViewBox:s&&s[i]||i,spinner:s&&s[l]||l,background:s&&s[r]||r,customClass:s&&s[a]||a,fullscreen:!!t.modifiers.fullscreen,target:t.modifiers.fullscreen?null:e,body:!!t.modifiers.body,visible:!0,lock:!!t.modifiers.lock})},z={mounted(e,t){t.value&&N(e,t)},updated(e,t){const n=e.ElLoading;t.oldValue!==t.value&&(t.value?N(e,t):null==n||n.close())},unmounted(e){var t;null==(t=e.ElLoading)||t.close()}},R={install(e){e.directive("loading",z),e.config.globalProperties.$loading=V},directive:z,service:V};export{R as E};
